---
title: "@/application-shell"
---

React component that ties together all the main functionalities of the Custom Applications.

# Installation

```
yarn add @commercetools-frontend/application-shell

# or

npm --save install @commercetools-frontend/application-shell
```

Additionally install the peer dependencies (if not present)

```
yarn add @apollo/client react react-dom react-intl react-redux react-router-dom redux @testing-library/react @testing-library/react-hooks

# or

npm --save install @apollo/client react react-dom react-intl react-redux react-router-dom redux @testing-library/react @testing-library/react-hooks
```

# Components

## `ApplicationShell`

This is the main component that contains all the general logic to render a Custom Application.<br />
The `ApplicationShell` component is expected to be rendered as the top-level component your application.

### Usage

```jsx title="entry-point.js"
import { ApplicationShell } from '@commercetools-frontend/application-shell';

const loadMessages = (locale) => {
  // ...
}
const entryPointUriPath = 'avengers'

const AsyncApplicationRoutes = React.lazy(
  () => import('../../routes' /* webpackChunkName: "avengers" */)
);

const EntryPoint = () => (
  <ApplicationShell
    environment={window.app}
    applicationMessages={loadMessages}
    onRegisterErrorListeners={() => {/* noop */}}
  >
    <AsyncApplicationRoutes />
  </ApplicationShell>
);
export default EntryPoint;
```

### Properties

| Props                            | Type               |        Required         | Default | Description                                                                                                                                                                                                                                                                                                                                                                      |
| -------------------------------- | ------------------ | :---------------------: | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `applicationMessages`            | `object` or `func` |           ✅            | -       | This is either an object containing all the translated messages, grouped by locale (`{ "en": { "Welcome": "Welcome" }, "de": { "Welcome": "Wilkommen" }}`), or a function that returns a Promise that resolves to such an object. The function is called with a `locale` parameter. See [Using the messages in the application](/development/translations#using-the-messages-in-the-application).                                                                                                                                                                |
| `environment`                  | `object`           |           ✅            | -       | The application runtime environment, which is exposed in `window.app`. See [Runtime configuration](/development/application-config#runtime-application-environment).                                                                                                                                                                                                                                                                                                                                                       |
| `render`                         | `func`             |           ✅ (*)           | -       | The render function is called when the `<ApplicationShell>` is ready to render the actual application. This is the case when the required data (user, project) has been fetched and the application context has been initialized. See also `children` to opt-into the new behavior to simplify the setup. The `render` prop still continues to be supported.                                                                                                                                                                                                                                  |
| `children`                         | `node`             |           ✅ (*)            | -       | Instead of using the `render` prop, render your application component as children of `<ApplicationShell>`. By doing so, the `<ApplicationShell>` pre-configures the main application routes according to the `entryPointUriPath` defined in the `custom-application-config.json`. This is an opt-int behavior as a replacement of the `render` prop, to simplify the entry point setup.                                                                                                                                                                                                                                    |
| `trackingEventList`         | `object`           |                       | -       | An optional object containing a map of tracking events.                                                                                                                                                                                                                                        |

# Hooks

## `useMcQuery`

A React Hook that wraps the [`useQuery`](https://www.apollographql.com/docs/react/data/queries/) Hook of Apollo Client. The only difference is that `useMcQuery` properly types the `context` object, which is always used to define the GraphQL `target`. See [Data Fetching](/development/data-fetching).

## `useMcLazyQuery`

A React Hook that wraps the [`useLazyQuery`](https://www.apollographql.com/docs/react/data/queries/#manual-execution-with-uselazyquery) Hook of Apollo Client. The only difference is that `useMcLazyQuery` properly types the `context` object, which is always used to define the GraphQL `target`. See [Data Fetching](/development/data-fetching).

## `useMcMutation`

A React Hook that wraps the [`useMutation`](https://www.apollographql.com/docs/react/data/mutations/) Hook of Apollo Client. The only difference is that `useMcMutation` properly types the `context` object, which is always used to define the GraphQL `target`. See [Data Fetching](/development/data-fetching).

# Utilities

## `createApolloClient`

Creates a new instance of the Apollo Client. Use this if you need to [configure the Apollo cache](https://www.apollographql.com/docs/react/caching/cache-configuration).

```js
createApolloClient({
  cache: {
    // ...
  },
})
```

The new Apollo Client instance must be explicitly passed to the `<ApplicationShell>`.

```js title="entry-point.js"
import {
  createApolloClient,
  ApplicationShell,
} from '@commercetools-frontend/application-shell';

const apolloClient = createApolloClient({
  cache: {
    // Your custom configuration, according to the Apollo cache documentation.
    // https://www.apollographql.com/docs/react/caching/cache-configuration/
  },
});

const EntryPoint = () => {
  return (
    <ApplicationShell
      apolloClient={apolloClient}
      // ...other props
    />
  );
};
```

Furthermore, in your tests you also need to create a new instance of your custom Apollo Client and pass it to the test utils.

```js
import { createApolloClient } from '@commercetools-frontend/application-shell';
import { renderAppWithRedux } from '@commercetools-frontend/application-shell/test-utils';

renderAppWithRedux({
  apolloClient: createApolloClient(),
  disableApolloMocks: true,
  // ...
});
```

# Test utils

See [Test utils for `<ApplicationShell>`](/development/testing#test-utils-for-applicationshell).
