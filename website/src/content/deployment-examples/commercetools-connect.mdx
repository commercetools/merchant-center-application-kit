---
title: Deploying to commercetools Connect
---

# Prerequisite

Before you get started, you need to have:

- A [commercetools](https://docs.commercetools.com/getting-started) account and a Project.
- A Custom Application [configured in the Merchant Center](https://docs.commercetools.com/merchant-center/managing-custom-applications).
- Access to [commercetools Connect](https://docs.commercetools.com/connect/overview).

  <Info>

    You can access the [Connect APIs](https://docs.commercetools.com/connect/deployments) using the [Client credentials Authorization flow](https://docs.commercetools.com/connect/hosts-and-authorization).

  </Info>


# Configuration

1. Create a connector using the [starter template](https://docs.commercetools.com/connect/development#install-a-starter-template).
2. [Install the Custom Applications starter template](/getting-started#installing-a-starter-template) with the name `sample-custom-application` inside the connector folder.
3. Add the environment variables to the `custom-application-config.mjs`. These variables will be injected into the application from the Connect configration (`connect.yml`).

    ```js title="custom-application-config.mjs" highlightLines="5-13"
    const config = {
      name: 'Example Custom Application',
      entryPointUriPath,
      cloudIdentifier: '${env:CLOUD_IDENTIFIER}',
      env: {
        development: {
          initialProjectKey: '${env:CTP_PROJECT_KEY}',
        },
        production: {
          applicationId: '${env:CUSTOM_APPLICATION_ID}',
          url: '${env:APPLICATION_URL}',
        },
      },
      oAuthScopes: {
        view: ['view_products'],
        manage: ['manage_products'],
      },
      icon: '${path:@commercetools-frontend/assets/application-icons/rocket.svg}',
      mainMenuLink: {
        defaultLabel: 'Template starter',
        labelAllLocales: [],
        permissions: [PERMISSIONS.View],
      },
      submenuLinks: [
        {
          uriPath: 'channels',
          defaultLabel: 'Channels',
          labelAllLocales: [],
          permissions: [PERMISSIONS.View],
        },
      ],
    };

    export default config;
    ```

4. Configure the Custom Application in the `connect.yaml` with name as the folder name of the custom application and needed standard, secured configurations as defined in `custom-application-config.mjs`

      ```yml
      deployAs:
        - name: example-custom-application
          applicationType: mc-app
          endpoint: /
          configuration:
            standardConfiguration:
              - key: CTP_PROJECT_KEY
                description: project key from the Composable Commerce Project
                default: "your-project"
              - key: CTP_REGION
                description: region of the Composable Commerce Project
                required: true
              - key: CUSTOM_APPLICATION_ID
                description: the Custom Application ID
                required: true
              - key: CLOUD_IDENTIFIER
                description: the cloud identifier
                default: "gcp-eu"
            securedConfiguration:
              - key: CTP_CLIENT_ID
                description: client id from the Composable Commerce Project
                required: true
              - key: CTP_CLIENT_SECRET
                description: client secret from the Composable Commerce Project
      ```

<Info>

The `APPLICATION_URL` environment variable is automatically provided by Connect and you don't need to define it in the Connect configuration.

</Info>

# Deploy to Connect

1. [Create the connector](https://docs.commercetools.com/connect/getting-started#create-a-connector).
2. Use the [preview](https://docs.commercetools.com/connect/getting-started#request-previewable-status-for-connectorstaged) or [publish](https://docs.commercetools.com/connect/getting-started#publish-for-private-use) flow for preparing connector for deployment.
3. In the Merchant Center, [add a Custom Application](https://docs.commercetools.com/merchant-center/managing-custom-applications#adding-a-custom-application).
    <Info>

      For the **Application URL**, enter a placeholder URL for now because you'll change it to the actual URL in the following steps.

    </Info>
4. [Configure the Application ID](https://docs.commercetools.com/merchant-center/managing-custom-applications#assigning-the-application-id) in your code.
4. [Deploy the connector](https://docs.commercetools.com/connect/getting-started#deploy-a-connector) with the correct configuration values.
5. Get the deployment URL for your deployment using the [Deployment API](https://docs.commercetools.com/connect/deployments#get-deployment). You can access it from `deployment.applications["example-custom-application"].url` path from the JSON response.
6. In the Merchant Center, update the **Application URL** for your Custom Application with the deployment URL collected in the previous step.

# Test your deployment

[Install the Custom Application](https://docs.commercetools.com/merchant-center/managing-custom-applications#installing-a-custom-application) in the Merchant Center and access it in your Projects.

