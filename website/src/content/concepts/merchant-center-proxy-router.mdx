---
title: Merchant Center Proxy Router
---

When you navigate through the Merchant Center, you can switch between the different Custom Applications available in your Projects, no matter if they are commercetools applications or something developed externally.

You might have noticed that the URL of the Merchant Center is always using the same origin, and only the URI part changes depending on the Project and application.

```
https://mc.<cloud-region>.commercetools.com/:projectKey/dashboard
https://mc.<cloud-region>.commercetools.com/:projectKey/products
https://mc.<cloud-region>.commercetools.com/:projectKey/orders
https://mc.<cloud-region>.commercetools.com/:projectKey/avengers
...
```

This way it looks like you are using one single web application even though underneath there are multiple Custom Applications.

# Routing

Every initial request to render the page goes through a server component called **Merchant Center Proxy Router**.<br />
This server is primarily responsible for matching the incoming request to the appropriate Custom Application and to forward the request to the actual location of the Custom Application. The response then should be serving the `index.html` of the Custom Application.

For example, the user tries to access the `/:projectKey/products` URL. The request goes through the Proxy Router which successfully matches the `products` identifier. The Proxy Router then loads the related configuration for the Products application (assuming that the application is installed for the given `projectKey`) and forwards the request to the location where the Custom Application is hosted. The `index.html` is then returned as a response and the Proxy Router forwards that to the browser. The Products application renders.

The same principle applies to any Custom Application:
1. Matching of the `entryPointUriPath`.
2. Loading configuration of Custom Application based on the Project access.
3. Forwarding of request to Custom Application URL. *(see [section below](#url-rewrites) for more information)*
4. Serving of `index.html`.

![Architecture Diagram](/images/merchant-center-proxy-router.png 'Merchant Center Proxy Router architecture')

# URL rewrites

Bear in mind that, when **Merchant Center Proxy Router** forwards the request to the Custom Application configured URL, it will include the pathname (`/:projectKey/products` in the example above) as well as the query parameters.

This is because the Custom Application handles client-side routing and it needs the path to properly render the page and it will use the `projectKey` internally.

You need to setup your deployment service to return the `index.html` file no matter which pathname exists in the Custom Application URL.

## Example

Let's say you have deployed a Custom Application with these info:
* Application URL: `https://my-app.netlify.app/`
* Application entry-point: `my-app`
* Installed in project: `my-project`

You will access the Merchant Center to load your Custom Application and the URL you will see in the browser would be like this: `https://mc.<cloud-region>.commercetools.com/my-project/my-app`.
Internally, the **Merchant Center Proxy Router** will send a request to this URL: `https://my-app.netlify.app/my-project/my-app`.

All of these requests should return the same file (`index.html`):
* https://my-app.netlify.app/
* https://my-app.netlify.app/my-project/my-app
* https://my-app.netlify.app/my-project/my-app/channels

Every deployment service has its own configuration in this regard and we try to provide hints for the most common cases.
(*check the [Deployment Examples](/deployment-examples) section*)

# Security Headers

The Merchant Center Proxy Router enforces the following HTTP security headers when serving the response from the Custom Application location:

* `Strict-Transport-Security: 'max-age=31536000'`
* `X-XSS-Protection: '1; mode=block'`
* `X-Content-Type-Options: 'nosniff`
* `X-Frame-Options: 'DENY'`
* `Referrer-Policy: 'same-origin`

# Related

For more information on what to do next, we recommend the following sections:

<Cards smallTitle clickable>
  <Card
    title="Going to Production"
    href="/development/going-to-production"
  >
    Learn more about preparing your Custom Application for production.
  </Card>
  <Card
    title="CLI"
    href="/api-reference/cli"
  >
    Learn more about using the Custom Applications CLI.
  </Card>
</Cards>
